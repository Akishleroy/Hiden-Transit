// Zustand store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞–Ω–æ–º–∞–ª–∏–π

import { create } from 'zustand';
import { devtools } from 'zustand/middleware';
import { 
  AnomalyStats, 
  DetailedAnomaly, 
  CriticalAnomaly, 
  TimelineData, 
  AnomalyFilters,
  ChatMessage 
} from '../types/anomalies';
import AnomalyAPI from '../services/api';

interface AnomalyStore {
  // –î–∞–Ω–Ω—ã–µ
  stats: AnomalyStats | null;
  anomalies: DetailedAnomaly[];
  criticalAnomalies: CriticalAnomaly[];
  timelineData: TimelineData[];
  chatMessages: ChatMessage[];
  
  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
  loading: {
    stats: boolean;
    anomalies: boolean;
    critical: boolean;
    timeline: boolean;
    chat: boolean;
  };
  
  // –û—à–∏–±–∫–∏
  error: string | null;
  
  // –§–∏–ª—å—Ç—Ä—ã
  filters: AnomalyFilters;
  
  // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
  pagination: {
    current: number;
    total: number;
    pageSize: number;
  };
  
  // –î–µ–π—Å—Ç–≤–∏—è
  fetchStats: () => Promise<void>;
  fetchAnomalies: (page?: number) => Promise<void>;
  fetchCriticalAnomalies: () => Promise<void>;
  fetchTimelineData: (period?: string) => Promise<void>;
  sendChatMessage: (message: string) => Promise<void>;
  setFilters: (filters: Partial<AnomalyFilters>) => void;
  clearError: () => void;
  clearChat: () => void;
}

export const useAnomalyStore = create<AnomalyStore>()(
  devtools(
    (set, get) => ({
      // –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
      stats: null,
      anomalies: [],
      criticalAnomalies: [],
      timelineData: [],
      chatMessages: [],
      
      // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
      loading: {
        stats: false,
        anomalies: false,
        critical: false,
        timeline: false,
        chat: false
      },
      
      error: null,
      
      // –§–∏–ª—å—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      filters: {
        type: 'all',
        severity: 'all',
        dateRange: '30days',
        minDeviation: 0,
        search: ''
      },
      
      // –ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      pagination: {
        current: 1,
        total: 0,
        pageSize: 50
      },
      
      // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
      fetchStats: async () => {
        set(state => ({ 
          loading: { ...state.loading, stats: true },
          error: null 
        }));
        
        try {
          const stats = await AnomalyAPI.getStats();
          set({ stats });
        } catch (error) {
          set({ error: '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏' });
        } finally {
          set(state => ({ 
            loading: { ...state.loading, stats: false }
          }));
        }
      },
      
      // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∞–Ω–æ–º–∞–ª–∏–π
      fetchAnomalies: async (page = 1) => {
        set(state => ({ 
          loading: { ...state.loading, anomalies: true },
          error: null 
        }));
        
        try {
          const { filters, pagination } = get();
          const offset = (page - 1) * pagination.pageSize;
          
          const result = await AnomalyAPI.getAnomalies(filters, pagination.pageSize, offset);
          
          set({
            anomalies: result.anomalies,
            pagination: {
              ...pagination,
              current: page,
              total: result.total
            }
          });
        } catch (error) {
          set({ error: '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–Ω–æ–º–∞–ª–∏–π' });
        } finally {
          set(state => ({ 
            loading: { ...state.loading, anomalies: false }
          }));
        }
      },
      
      // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–æ–º–∞–ª–∏–π
      fetchCriticalAnomalies: async () => {
        set(state => ({ 
          loading: { ...state.loading, critical: true },
          error: null 
        }));
        
        try {
          const criticalAnomalies = await AnomalyAPI.getCriticalAnomalies();
          set({ criticalAnomalies });
        } catch (error) {
          set({ error: '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–æ–º–∞–ª–∏–π' });
        } finally {
          set(state => ({ 
            loading: { ...state.loading, critical: false }
          }));
        }
      },
      
      // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
      fetchTimelineData: async (period = '30days') => {
        set(state => ({ 
          loading: { ...state.loading, timeline: true },
          error: null 
        }));
        
        try {
          const timelineData = await AnomalyAPI.getTimelineData(period);
          set({ timelineData });
        } catch (error) {
          set({ error: '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö' });
        } finally {
          set(state => ({ 
            loading: { ...state.loading, timeline: false }
          }));
        }
      },
      
      // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
      sendChatMessage: async (message: string) => {
        if (!message.trim()) return;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        const userMessage: ChatMessage = {
          id: Date.now().toString(),
          content: message,
          isUser: true,
          timestamp: new Date().toISOString()
        };
        
        set(state => ({
          chatMessages: [...state.chatMessages, userMessage],
          loading: { ...state.loading, chat: true },
          error: null
        }));
        
        try {
          // –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç AI –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏
          const aiResponse = generateAIResponse(message);
          
          const aiMessage: ChatMessage = {
            id: (Date.now() + 1).toString(),
            content: aiResponse,
            isUser: false,
            timestamp: new Date().toISOString()
          };
          
          set(state => ({
            chatMessages: [...state.chatMessages, aiMessage]
          }));
        } catch (error) {
          set({ error: '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è' });
        } finally {
          set(state => ({ 
            loading: { ...state.loading, chat: false }
          }));
        }
      },
      
      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
      setFilters: (newFilters: Partial<AnomalyFilters>) => {
        set(state => ({
          filters: { ...state.filters, ...newFilters },
          pagination: { ...state.pagination, current: 1 }
        }));
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        get().fetchAnomalies();
      },
      
      // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
      clearError: () => set({ error: null }),
      
      // –û—á–∏—Å—Ç–∫–∞ —á–∞—Ç–∞
      clearChat: () => set({ chatMessages: [] })
    }),
    {
      name: 'anomaly-store',
      partialize: (state) => ({ 
        filters: state.filters,
        chatMessages: state.chatMessages 
      })
    }
  )
);

// –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ AI
function generateAIResponse(message: string): string {
  const lowerMessage = message.toLowerCase();
  
  if (lowerMessage.includes('—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞') || lowerMessage.includes('—Å–µ–≥–æ–¥–Ω—è')) {
    return `üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å–µ–≥–æ–¥–Ω—è:**

‚Ä¢ –í—Å–µ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π: 2,847
‚Ä¢ –í—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –∞–Ω–æ–º–∞–ª–∏–π: 127 (4.5%)
‚Ä¢ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ: 23 –æ–ø–µ—Ä–∞—Ü–∏–∏
‚Ä¢ –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫: 45 –æ–ø–µ—Ä–∞—Ü–∏–π
‚Ä¢ –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫: 59 –æ–ø–µ—Ä–∞—Ü–∏–π

**–¢–æ–ø –∞–Ω–æ–º–∞–ª–∏–π:**
1. –í–µ—Å–æ–≤—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: 67 —Å–ª—É—á–∞–µ–≤
2. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏: 34 —Å–ª—É—á–∞—è  
3. –ú–∞—Ä—à—Ä—É—Ç–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è: 26 —Å–ª—É—á–∞–µ–≤

–†–µ–∫–æ–º–µ–Ω–¥—É—é –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏—é "–ë—Ä–µ—Å—Ç-–¶–µ–ΩÔøΩÔøΩ—Ä–∞–ª—å–Ω—ã–π" - 18 –∞–Ω–æ–º–∞–ª–∏–π –∑–∞ –¥–µ–Ω—å.`;
  }
  
  if (lowerMessage.includes('–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ') || lowerMessage.includes('–∫—Ä–∏—Ç–∏—á')) {
    return `üö® **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞–Ω–æ–º–∞–ª–∏–∏:**

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ 23 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞–Ω–æ–º–∞–ª–∏–∏:**

1. **–í–∞–≥–æ–Ω ‚Ññ8734291** - –í–µ—Å–æ–≤–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ +127% (–ü–æ–¥–æ–∑—Ä–µ–Ω–∏–µ –Ω–∞ –ø–µ—Ä–µ–≥—Ä—É–∑)
2. **–í–∞–≥–æ–Ω ‚Ññ5629834** - –ú–∞—Ä—à—Ä—É—Ç–Ω–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ (–ù–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞)
3. **–í–∞–≥–æ–Ω ‚Ññ7423851** - –í—Ä–µ–º–µ–Ω–Ω–∞—è –∞–Ω–æ–º–∞–ª–∏—è (–ó–∞–¥–µ—Ä–∂–∫–∞ 72 —á–∞—Å–∞)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –≤–∞–≥–æ–Ω—ã
‚Ä¢ –°–≤—è–∑–∞—Ç—å—Å—è —Å –¥–∏—Å–ø–µ—Ç—á–µ—Ä—Å–∫–æ–π —Å–ª—É–∂–±–æ–π –ø–æ –º–∞—Ä—à—Ä—É—Ç–Ω—ã–º –Ω–∞—Ä—É—à–µ–Ω–∏—è–º
‚Ä¢ –£–≤–µ–¥–æ–º–∏—Ç—å —Å–ª—É–∂–±—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–∫–∞—Ö`;
  }
  
  if (lowerMessage.includes('–∞–Ω–∞–ª–∏–∑') && lowerMessage.includes('–≤–µ—Å')) {
    return `‚öñÔ∏è **–ê–Ω–∞–ª–∏–∑ –≤–µ—Å–æ–≤—ã—Ö –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π:**

**–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π:**
‚Ä¢ –°—Ä–µ–¥–Ω–µ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: ¬±12.3%
‚Ä¢ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: +184% (–≤–∞–≥–æ–Ω ‚Ññ9234567)
‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π: 156 —Å–ª—É—á–∞–µ–≤

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã:**
‚Ä¢ 67% –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–µ –†–æ—Å—Å–∏—è ‚Üí –ë–µ–ª–∞—Ä—É—Å—å
‚Ä¢ –ü–∏–∫ –∞–Ω–æ–º–∞–ª–∏–π: —á–µ—Ç–≤–µ—Ä–≥ 14:00-16:00
‚Ä¢ –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –≥—Ä—É–∑—ã: –º–µ—Ç–∞–ª–ª–æ–ª–æ–º, —É–≥–æ–ª—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
‚Ä¢ –£—Å–∏–ª–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏—è –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–ª–∏–±—Ä–æ–≤–∫—É –≤–µ—Å–æ–≤ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ "–ö—Ä–∞—Å–Ω–æ–µ"`;
  }
  
  if (lowerMessage.includes('–º–∞—Ä—à—Ä—É—Ç') || lowerMessage.includes('–ø—Ä–æ–±–ª–µ–º')) {
    return `üõ£Ô∏è **–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã:**

**–¢–æ–ø-5 –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å –∞–Ω–æ–º–∞–ª–∏—è–º–∏:**

1. **–†–æ—Å—Å–∏—è ‚Üí –ë–µ–ª–∞—Ä—É—Å—å** (67 –∞–Ω–æ–º–∞–ª–∏–π)
   - –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –≤–µ—Å–æ–≤—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
   - –°—Ç–∞–Ω—Ü–∏—è: –ö—Ä–∞—Å–Ω–æ–µ-–ü–∞—Å—Å

2. **–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω ‚Üí –ë–µ–ª–∞—Ä—É—Å—å** (34 –∞–Ω–æ–º–∞–ª–∏–∏)
   - –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
   - –°—Ç–∞–Ω—Ü–∏—è: –°–æ—Å–Ω–æ–≤–∫–∞

3. **–ë–µ–ª–∞—Ä—É—Å—å ‚Üí –ü–æ–ª—å—à–∞** (23 –∞–Ω–æ–º–∞–ª–∏–∏)
   - –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç
   - –°—Ç–∞–Ω—Ü–∏—è: –ë—Ä–µ—Å—Ç-–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ –ö—Ä–∞—Å–Ω–æ–µ-–ü–∞—Å—Å
‚Ä¢ –£–ª—É—á—à–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é —Å –∫–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π`;
  }
  
  if (lowerMessage.includes('—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏') || lowerMessage.includes('—Ä–µ–∫–æ–º–µ–Ω–¥')) {
    return `üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

**–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –Ω–µ–¥–µ–ª–∏):**
‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ "–ö—Ä–∞—Å–Ω–æ–µ"
‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–ª—è –≥—Ä—É–∑–æ–≤ >50 —Ç–æ–Ω–Ω
‚Ä¢ –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

**–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1-3 –º–µ—Å—è—Ü–∞):**
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–µ—Ä–∫—É –≤–µ—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—ã —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏
‚Ä¢ –û–±—É—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª –Ω–æ–≤—ã–º –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º

**–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (3-12 –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç—å –ø—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É
‚Ä¢ –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ü–µ–ø–æ—á–∫–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** —Å–Ω–∏–∂–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π –Ω–∞ 35-40%`;
  }
  
  if (lowerMessage.includes('–ø—Ä–æ–≥–Ω–æ–∑') || lowerMessage.includes('–∑–∞–≤—Ç—Ä–∞')) {
    return `üîÆ **–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –∑–∞–≤—Ç—Ä–∞:**

**–û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π: 2,650-2,800
‚Ä¢ –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏: 98-115 (3.7-4.1%)
‚Ä¢ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏: 15-20 —Å–ª—É—á–∞–µ–≤

**–§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞:**
‚Ä¢ –ù–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–µ –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (–¥–æ–∂–¥—å)
‚Ä¢ –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ "–°–æ—Å–Ω–æ–≤–∫–∞"
‚Ä¢ –ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –≥—Ä—É–∑–æ–ø–æ—Ç–æ–∫ –∏–∑ –†–æ—Å—Å–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞:**
‚Ä¢ –£—Å–∏–ª–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å —Å 10:00 –¥–æ 14:00
‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ä–µ–∑–µ—Ä–≤ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –¥–ª—è —Å—Ç–∞–Ω—Ü–∏–∏ "–°–æ—Å–Ω–æ–≤–∫–∞"
‚Ä¢ –£–≤–µ–¥–æ–º–∏—Ç—å —Å–ª—É–∂–±—ã –æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–∫–∞—Ö

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞ –∞–Ω–æ–º–∞–ª–∏–π:** 23%`;
  }
  
  // –û–±—â–∏–π –æ—Ç–≤–µ—Ç
  return `ü§ñ **AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç Gray Tranzit**

–Ø –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å: "${message}"

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
‚Ä¢ "—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ–≥–æ–¥–Ω—è" - —Ç–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚Ä¢ "–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞–Ω–æ–º–∞–ª–∏–∏" - —Å—Ä–æ—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã  
‚Ä¢ "–∞–Ω–∞–ª–∏–∑ –≤–µ—Å–∞" - –≤–µ—Å–æ–≤—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
‚Ä¢ "–ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã" - –º–∞—Ä—à—Ä—É—Ç–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚Ä¢ "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏" - —Å–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
‚Ä¢ "–ø—Ä–æ–≥–Ω–æ–∑ –∑–∞–≤—Ç—Ä–∞" - –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è

**–°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–∞:** 728,904+ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º
**–¢–æ—á–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞:** 97.2%
**–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** <150–º—Å

–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å? üöÄ`;
}